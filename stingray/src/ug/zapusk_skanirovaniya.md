# Запуск сканирования

Запуск сканирования может быть произведен в ручном или в автоматическом режиме. Для запуска сканирования выберите пункт основного меню **Сканы** и нажмите кнопку **Добавить сканирование** в правом верхнем углу.

<figure markdown>
![](../ug/img/28.png)
</figure>
 
Выберите или перетащите на появившуюся страницу **Добавить сканирование** apk-файл или ipa-файл сканируемого приложения:

<figure markdown>
![](../ug/img/29.png)
</figure>
 
!!! note "Примечание"
    Если пакет с выбранным именем и хеш-суммой уже загружен, в целях экономии ресурсов его повторная загрузка не производится, а используется файл, уже имеющийся на сервере.

<figure markdown>
![](../ug/img/30.png)
</figure>
 
После выбора файла на странице **Добавить сканирование** будут представлены необходимые для запуска анализа приложения поля:

* Информация о файле тестируемого приложения: **имя пакета**, **название/код версии**, **Target SDK**, **Min SDK**, **имя/размер/хеш файла** и **тип архитектуры**.
* **Проект** — проект, в рамках которого будет проводиться сканирование.

    !!! note "Примечание"
        Для выбора доступны либо проекты с незаполненным при создании полем **Имя пакета** (см. раздел «[Проекты](./projects.md)»), либо те, для которых в данном поле указан пакет, выбранный в предыдущем шаге. Таким образом, не исключена ситуация, когда в данном поле будут отсутствовать доступные для выбора элементы. В этом случае следует создать новый проект с пустым полем **Имя пакета** или, указав в нем соответствующий пакет.

* **Профиль** — профиль сканирования, для которого будет проводиться сканирование.
* **Режим** — ручное или автоматическое сканирование.
* **Тест-кейс** — эта опция появляется в случае выбора автоматического режима и позволяет выбрать тест-кейса, который будет воспроизведен.

    !!! note "Примечание"
        Отображаются только тест-кейсы выбранного проекта.

* **Архитектура** — архитектура устройства, на котором будет запущено приложение.

    !!!note "Примечание"
        При отсутствии доступных для выполнения сканирования агентов в поле **Архитектура** отображается сообщение **Отсутствуют запущенные устройства для данной архитектуры**.

## Автоматическое сканирование

Для запуска сканирования в автоматическом режиме необходимо сделать следующие шаги:

* Выбрать и загрузить файл мобильного приложения с расширением \*.apk или \*.ipa, для которого будет проводиться сканирование.

    !!! note "Примечание"
        Если пакет с выбранным именем и хеш-суммой уже загружен, в целях экономии ресурсов его повторная загрузка не производится, а используется файл, уже имеющийся на сервере.

* Выбрать проект из выпадающего списка существующих в системе проектов.
    
    !!! note "Примечание"
        Для выбора доступны либо проекты с незаполненным при создании полем **Имя пакета** (см. раздел «[Проекты](./projects.md)»), либо те, для которых в данном поле указан пакет, выбранный в предыдущем шаге. Таким образом, не исключена ситуация, когда в данном поле будут отсутствовать доступные для выбора элементы. В этом случае следует создать новый проект с пустым полем **Имя пакета** или, указав в нем соответствующий пакет.

* Выбрать профиль сканирования из выпадающего списка.
* Выбрать архитектуру, на которой будет проводиться сканирование. Отметим, что в данном поле будет доступна для выбора только та архитектура, на которой был записан тест-кейс и которая активна в системе.
* В поле **Режим** выбрать **Автоматическое** сканирование из выпадающего списка.
* Во вновь появившемся внизу поле выбрать имя уже существующего в системе тест-кейса для запуска сканирования в автоматическом режиме.

<figure markdown>
![](../ug/img/31.png)
</figure>
  
По нажатию кнопки **Запустить** происходит запуск сканирования и переход на страницу **Сканирование**. Будет отображена страница с экраном устройства без возможности взаимодействия с ним. Передача изображения с экрана устройства необходима для анализа работы тест-кейса. В ходе сканирования на экране устройства отображаются следующие статусы:

* **Поиск свободного устройства** — осуществляется поиск свободного сканирующего агента.
* **Запуск приложения** — выполняется запуск приложения.

<figure markdown>
![](../ug/img/32.png)
</figure>
  
Во время проведения автоматического сканирования также идет запись видео, которое при завершении доступно на вкладке **Запись** сканирования на странице с детальными результатами сканирования для данного теста.

При нажатии на кнопку **К результатам сканирований** будет осуществлен переход к странице со списком всех сканирований. При переходе на страницу **Список сканирований** можно увидеть новую строку, отображающую текущий результат автоматического сканирования. При нажатии на **ID** тест-кейса, когда соответствующее сканирование имеет состояние **Создан**, **Запускается** или **Запущен**, происходит возврат на страницу с экраном устройства. После завершения сканирования приложения его состояние примет значение **Анализ** на время обработки полученных результатов. Затем состояние сканирования поменяется на **Успешно** или **Неуспешно** в зависимости от результата. Если нажать на **ID** тест-кейса, когда сканирование имеет состояние **Анализ**, **Успешно** или **Неуспешно**, произойдет переход на страницу с детальными результатами сканирования, см. раздел «[Результаты сканирований](./rezultaty_skanirovanij.md)».

## Ручное сканирование

Для запуска ручного сканирования выберите пункт основного меню **Сканы** и нажмите кнопку **Добавить сканирование** в правом верхнем углу. Выберите или перетащите на появившуюся страницу **Добавить сканирование** apk-файл или ipa-файл сканируемого приложения. При загрузке файла система определит его архитектуру и отфильтрует все возможные подходящие значения в полях на появившейся странице:

<figure markdown>
![](../ug/img/34.png)
</figure>
 
!!! note "Примечание"
    Если пакет с выбранным именем и хеш-суммой уже загружен, в целях экономии ресурсов его повторная загрузка не производится, а используется файл, уже имеющийся на сервере.

Для запуска сканирования в ручном режиме необходимо сделать следующие шаги:

* Выбрать проект из выпадающего списка существующих в системе проектов.

    !!! note "Примечание"
        Для выбора доступны либо проекты с незаполненным при создании полем **Имя пакета** (см. раздел «[Проекты](./projects.md)»), либо те, для которых в данном поле указан пакет, выбранный в предыдущем шаге. Таким образом, не исключена ситуация, когда в данном поле будут отсутствовать доступные для выбора элементы. В этом случае следует создать новый проект с пустым полем **Имя пакета** или, указав в нем соответствующий пакет.

* Выбрать профиль сканирования из выпадающего списка.
* Выбрать архитектуру, на которой будет проводиться сканирование.
* В поле **Режим** выбрать **Ручное** сканирование из выпадающего списка.

<figure markdown>
![](../ug/img/33.png)
</figure>

По нажатию кнопки **Запустить** происходит запуск сканирования и переход на страницу **Сканирование**. Будет отображена страница с экраном устройства и с запущенным приложением. Ручное сканирование выглядит, как обычная работа пользователя с приложением. Все действия пользователя записываются в виде последовательности шагов тест-кейса.

<figure markdown>
![](../ug/img/35.png)
</figure>

<figure markdown>
![](../ug/img/36.png)
</figure>

После того, как все необходимые действия по сканированию приложения были сделаны, нажмите кнопку **Остановить**. После нажатия сканирование будет остановлено, система перейдет в режим анализа данных. При нажатии на кнопку **К результатам сканирований** будет осуществлен переход к странице со списком всех сканирований. Идентифицировать полученные результаты ручного сканирования можно по данным в столбце **Изменен**.

Следует отметить, что для обработки только что полученных результатов ручного сканирования требуется некоторое время, поэтому для детального просмотра и анализа результатов необходимо дождаться окончания их обработки. Статус сканирования в столбце **Состояние** может принимать нескольких значений:

* **Создан** — сканирование создано и помещено в очередь сканирования.
* **Запускается** — сканирование уже в обработке и перед запуском проходит необходимая техническая предварительная работа (установка приложения, его запуск и т. д.).
* **Запущен** — происходит процесс сканирования и взаимодействие с приложением, в зависимости от типа сканирования, вручную или через тест-кейсы.
* **Анализ** — взаимодействие с приложением закончено, идет процесс анализа собранных данных.
* **Неуспешно** — сканирование завершилось с ошибкой.
* **Успешно** — сканирование завершено успешно.
* **Отменен** — сканирование отменено с использованием расположенного справа раскрывающегося меню.
* **Ожидание повторного анализа** — был запущен и еще не завершился повторный анализ результатов сканирования.

<figure markdown>
![](../ug/img/37.png)
</figure>

## Запуск сканирования из командной строки

Сканирование приложения можно запустить не только из пользовательского интерфейса системы, но также из командной строки. Процесс формирования командной строки и запуска сканирования подробно описан в разделе «[Интеграции](../ag/integracii.md)».

## Запуск сканирования из систем сборки

Для запуска сканирования приложений из систем сборки созданы средства инструментальной поддержки, позволяющие значительно упростить этот процесс.

Запуск сканирования из систем сборки подробно описан в разделе «[Интеграции](../ag/integracii.md)».