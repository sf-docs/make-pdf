# Требования к инфраструктуре

## Требования к аппаратному обеспечению

Серверные компоненты Stingray должны быть установлены на выделенном сервере, предназначенном исключительно для эксплуатации серверных компонент Stingray.

Для работы системы обязательно наличие поддержки виртуализации, а именно необходим процессор с поддержкой технологии виртуализации Intel Virtualization Technology (VT, VT-x, vmx) или AMD Virtualization (AMD-V, SVM).

### Минимальные технические характеристики серверного оборудования

* 8-ядерный CPU 2 ГГц. 
* Оперативная память: 24 Гб. 
* Свободное дисковое пространство 100 GB (+ пространство для размещения прикладных систем и баз данных).

### Рекомендуемые технические характеристики серверного оборудования

* 16-ядерный CPU 3 ГГц. 
* Оперативная память: 32 Гб. 
* Свободное дисковое пространство 500 GB (+ пространство для размещения прикладных систем и баз данных).

Для развертывания платформы Stingray на базе клиентской инфраструктуры требуется следующая минимальная аппаратная или виртуальная конфигурация оборудования:

Наименование|Кол-во|CPU|RAM, Гб|HDD, Гб
-|:-:|-|:-:|:-:
Stingray (минимальная конфигурация)|1|8-ядерный процессор (2 ГГц) с поддержкой технологии виртуализации Intel Virtualization Technology (VT, VT-x, vmx) или AMD Virtualization (AMD-V, SVM)|24|200
Stingray (рекомендуемая конфигурация)|1|16-ядерный процессор (3 ГГц) с поддержкой технологии виртуализации Intel Virtualization Technology (VT, VT-x, vmx) или AMD Virtualization (AMD-V, SVM)|32|500

Минимальная конфигурация рассчитана из следующего количества сканирующих агентов:

* Два сканирующих агента Android.
* Два сканирующих агента iOS.

При увеличении количества сканирующих агентов необходимо пересмотреть конфигурацию оборудования из расчета 1 ядро и 4 Гб ОЗУ на каждого дополнительного сканирующего агента при их параллельной работе. Также можно исходить из таблицы ниже.

Количество сканирующих агентов|Ядер процессора (физических)|Общее количество потоков|RAM, Гб
-|:-:|:-:|:-:
2 Android, 2 iOS|8*|16|24
4 Android, 4 iOS|12*|24|24
6 Android, 6 iOS|16*|32|32

\* При виртуализации количество виртуальных процессоров (vCPU) должно соответствовать общему количеству потоков.

## Архитектура и ОС

Система поддерживает следующие типы ОС и ПО для полноценного функционирования.

Операционная система|Архитектура|Платформа
-|:-:|-
Linux|64-bit|Ubuntu Server 18.04.6 x64
Linux|64-bit|Centos / RHEL 8.4 и выше

## Сетевой доступ

Установленные для эксплуатации Stingray технические средства должны быть совместимы между собой и поддерживать сетевой протокол TCP/IP. Для первоначальной настройки и установки платформы Stingray и сопутствующих пакетов желателен доступ к следующим ресурсам:

№|Адрес источника|Адрес приемника|Тип подключения|Порты|Назначение
:-:|-|-|:-:|:-:|-
1|Сетевой адрес Stingray|[https://download.docker.com](https://download.docker.com)|Внешний|80, 443|Установка docker
2|Сетевой адрес Stingray|[http://archive.ubuntu.com](http://archive.ubuntu.com)<br>[http://security.ubuntu.com](http://security.ubuntu.com)|Внешний|80, 443|Установка сопутствующих пакетов
3|Сетевой адрес Stingray|[https://cr.yandex/](https://cr.yandex/)|Внешний|80, 443|Авторизация в хранилище docker и загрузка docker-образов
4|Сетевой адрес Stingray|[https://container-registry.api.cloud.yandex.net](https://container-registry.api.cloud.yandex.net)|Внешний|80, 443|Авторизация в хранилище docker и загрузка docker-образов
5|CI/CD система, в которой осуществляется процесс сборки приложения|Сетевой адрес Stingray|Внутренний|80, 443|Загрузка артефакта сборки (мобильного приложения) для анализа в Stingray
6|Сетевой адрес системы Stingray|Backend мобильного приложения|Внутренний|80, 443|Сетевая доступность backend для корректной работы мобильного приложения
7|Рабочее место пользователя Stingray|Сетевой адрес Stingray|Внутренний|80, 443|Работа пользователей с графическим интерфейсом системы
8|Рабочее место администратора Stingray|Сетевой адрес Stingray|Внутренний|80, 443, 22|Администрирование системы Stingray